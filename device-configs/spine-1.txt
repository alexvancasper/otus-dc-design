set version 22.1R1.10
set groups To-Leafs interfaces <ge-*> mtu 9216
set apply-groups To-Leafs
set system host-name spine-1
set system root-authentication encrypted-password "$6$EckUIA7o$wLoE9CoA4cczvcgo.Oz8ttntfZSaekmHL49NvbrqQSWkt3NsOhVxaI0mnWtG3KkDpqW.cEobJ0Hu3y4zhfmhH/"
set system syslog file interactive-commands interactive-commands any
set system syslog file messages any notice
set system syslog file messages authorization info
set system processes dhcp-service traceoptions file dhcp_logfile
set system processes dhcp-service traceoptions file size 10m
set system processes dhcp-service traceoptions level all
set system processes dhcp-service traceoptions flag packet
set chassis fpc 0 pic 0 tunnel-services bandwidth 1g
set interfaces ge-0/0/0 unit 0 family inet address 10.0.1.2/30
set interfaces ge-0/0/1 unit 0 family inet address 10.0.2.2/30
set interfaces ge-0/0/2 unit 0 family inet address 10.0.3.2/30
set interfaces fxp0 unit 0 family inet dhcp vendor-id Juniper-vmx-VM652E4F0D64
set interfaces fxp0 unit 0 family inet6 dhcpv6-client client-type stateful
set interfaces fxp0 unit 0 family inet6 dhcpv6-client client-ia-type ia-na
set interfaces fxp0 unit 0 family inet6 dhcpv6-client client-identifier duid-type duid-ll
set interfaces fxp0 unit 0 family inet6 dhcpv6-client vendor-id Juniper:vmx:VM652E4F0D64
set interfaces lo0 unit 0 family inet address 10.255.255.1/32 primary
set interfaces lo0 unit 0 family inet address 10.255.255.1/32 preferred
set policy-options policy-statement BGP_LOOPBACK0 term TERM1 from protocol direct
set policy-options policy-statement BGP_LOOPBACK0 term TERM1 from route-filter 0.0.0.0/0 prefix-length-range /32-/32
set policy-options policy-statement BGP_LOOPBACK0 term TERM1 then accept
set policy-options policy-statement PFE-ECMP then load-balance per-packet
set routing-options router-id 10.255.255.1
set routing-options autonomous-system 4210000001
set routing-options forwarding-table export PFE-ECMP
set protocols router-advertisement interface fxp0.0
set protocols bgp group UNDERLAY type external
set protocols bgp group UNDERLAY family inet unicast
set protocols bgp group UNDERLAY export BGP_LOOPBACK0
set protocols bgp group UNDERLAY local-as 65501
set protocols bgp group UNDERLAY multipath multiple-as
set protocols bgp group UNDERLAY neighbor 10.0.1.1 peer-as 65511
set protocols bgp group UNDERLAY neighbor 10.0.2.1 peer-as 65512
set protocols bgp group UNDERLAY neighbor 10.0.3.1 peer-as 65513
set protocols bgp group OVERLAY_RR_MESH type internal
set protocols bgp group OVERLAY_RR_MESH local-address 10.255.255.1
set protocols bgp group OVERLAY_RR_MESH family evpn signaling
set protocols bgp group OVERLAY_RR_MESH neighbor 10.255.255.2
set protocols bgp group OVERLAY type internal
set protocols bgp group OVERLAY local-address 10.255.255.1
set protocols bgp group OVERLAY keep all
set protocols bgp group OVERLAY family evpn signaling
set protocols bgp group OVERLAY cluster 10.255.250.1
set protocols bgp group OVERLAY multipath
set protocols bgp group OVERLAY neighbor 10.255.254.1
set protocols bgp group OVERLAY neighbor 10.255.254.2
set protocols bgp group OVERLAY neighbor 10.255.254.3
set protocols bgp group OVERLAY vpn-apply-export
set protocols bgp hold-time 10